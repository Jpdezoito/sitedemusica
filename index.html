<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meu Player de Músicas</title>
  <link rel="stylesheet" href="web/themes.css">
  <link rel="stylesheet" href="web/styles.css">
  <link rel="stylesheet" href="web/visualizer.css">
  <script src="web/themes.js"></script>
  <script>
    (function () {
      var validThemes = ['minimal', 'darkpro', 'neon', 'retro', 'glass', 'vinyl', 'studio', 'ocean'];
      var validLayouts = ['compact', 'split', 'fullscreen'];
      var savedTheme = localStorage.getItem('player_theme') || 'minimal';
      var savedLayout = localStorage.getItem('player_layout') || 'compact';
      var theme = validThemes.indexOf(savedTheme) >= 0 ? savedTheme : 'minimal';
      var layout = validLayouts.indexOf(savedLayout) >= 0 ? savedLayout : 'compact';
      document.documentElement.classList.add('theme-' + theme);
      document.documentElement.classList.add('layout-' + layout);
    })();
  </script>
</head>
<body>
  <div id="cornerGlowLayer" aria-hidden="true"></div>
  <div id="app" class="app">
    <aside class="sidebar">
      <div class="logo">Reprodutor Multimidia</div>
      <nav>
        <a href="#inicio" class="nav-item" data-view="queue">Inicio</a>
        <a href="#musicas" class="nav-item" data-view="library">Biblioteca de musicas</a>
        <a href="#videos" class="nav-item" data-view="library">Biblioteca de videos</a>
        <a href="#fila" class="nav-item active" data-view="queue">Fila de reproducao</a>
        <a href="#playlists" class="nav-item" data-view="playlists">Playlists</a>
        <a href="#config" class="nav-item" data-view="settings">Configuracoes</a>
      </nav>
    </aside>

    <main class="main">
      <header class="topbar">
        <h1 class="page-title" id="mainTitle">Fila de reproducao</h1>
        <div class="page-actions" id="pageActions">
          <button id="uploadButton" class="primary">Adicionar arquivo(s)</button>
          <button id="deleteTrackButton" class="ghost danger" disabled>Excluir</button>
          <span id="uploadStatus" class="upload-status"></span>
          <input id="uploadInput" class="hidden" type="file" accept=".mp3,.wav,.m4a,.ogg,.flac" multiple>
        </div>
      </header>

      <section class="content">
        <div class="content-inner">
          <section id="queueView" class="view">
            <div class="card">
              <div class="card-header">
                <strong>Fila</strong>
                <div class="card-actions toolbar">
                  <button id="clearQueue" class="ghost">Limpar</button>
                  <div class="dropdown">
                    <button id="addSelected" class="primary">Adicionar a</button>
                    <div id="addMenu" class="dropdown-menu hidden">
                      <button type="button" data-action="queue">Adicionar na fila</button>
                      <div class="menu-sep"></div>
                      <div class="menu-title">Adicionar em playlist</div>
                      <div id="addMenuPlaylists" class="menu-list"></div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card-body">
                <div class="table-wrap">
                  <table id="queueTable">
                    <thead>
                      <tr>
                        <th></th>
                        <th>Titulo</th>
                        <th>Artista</th>
                        <th>Album</th>
                        <th>Duracao</th>
                      </tr>
                    </thead>
                    <tbody></tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>

          <section id="libraryView" class="view hidden">
            <div class="card">
              <div class="card-header">
                <strong>Biblioteca de musicas</strong>
                <div class="card-actions toolbar">
                  <input id="librarySearch" class="input" type="search" placeholder="Buscar musica">
                  <button id="refreshLibrary" class="ghost">Atualizar</button>
                </div>
              </div>
              <div class="card-body">
                <div class="table-wrap">
                  <table id="libraryTable">
                    <thead>
                      <tr>
                        <th></th>
                        <th>Titulo</th>
                        <th>Artista</th>
                        <th>Album</th>
                        <th>Duracao</th>
                      </tr>
                    </thead>
                    <tbody></tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>

          <section id="playlistsView" class="view hidden">
            <div class="split">
              <aside class="card">
                <div class="card-header">
                  <strong>Playlists</strong>
                  <div class="card-actions">
                    <button id="newPlaylist" class="ghost">Nova playlist</button>
                  </div>
                </div>
                <div class="card-body">
                  <ul id="playlistList"></ul>
                </div>
              </aside>
              <section class="card">
                <div class="card-header">
                  <strong id="playlistName">Selecione uma playlist</strong>
                  <div class="card-actions toolbar">
                    <button id="playPlaylist" class="primary">Tocar playlist</button>
                    <button id="addToPlaylist" class="ghost">Adicionar faixa selecionada</button>
                    <button id="removeFromPlaylist" class="ghost">Remover faixa</button>
                  </div>
                </div>
                <div class="card-body">
                  <div class="table-wrap">
                    <table id="playlistTracksTable">
                      <thead>
                        <tr>
                          <th></th>
                          <th>Titulo</th>
                          <th>Artista</th>
                          <th>Album</th>
                          <th>Duracao</th>
                        </tr>
                      </thead>
                      <tbody></tbody>
                    </table>
                  </div>
                </div>
              </section>
            </div>
          </section>

          <section id="settingsView" class="view hidden">
            <div class="card">
              <div class="card-header">
                <strong>Configuracoes</strong>
              </div>
              <div class="card-body">
                <div class="settings-list">
                  <div class="settings-row">
                    <div>
                      <strong>Volume padrao</strong>
                      <div class="text-muted">Volume inicial do player</div>
                    </div>
                    <input id="defaultVolume" type="range" min="0" max="1" step="0.01" value="0.8">
                  </div>
                  <div class="settings-row">
                    <div>
                      <strong>Modo tema</strong>
                      <div class="text-muted">Visual claro (padrao)</div>
                    </div>
                    <select id="themeMode" class="input">
                      <option value="light">Claro</option>
                    </select>
                  </div>
                  <div class="settings-row">
                    <div>
                      <strong>Modelo de reproducao</strong>
                      <div id="playbackModelDescription" class="text-muted">Escolha o formato do player</div>
                    </div>
                    <select id="playbackModel" class="input"></select>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </section>

      <footer class="player">
        <div class="now-block">
          <div class="vinyl-stage" aria-hidden="true">
            <div class="vinyl-disc" id="vinylDisc">
              <div class="vinyl-label" id="vinylLabel">VP</div>
            </div>
            <div class="vinyl-led" id="vinylLed" aria-label="status pause"></div>
          </div>
          <div class="now-playing" id="nowPlaying">Nenhuma faixa selecionada</div>
          <div class="model-active">
            <span id="playbackModelActive">Modelo: PulseRing Player</span>
            <select id="playbackModelQuick" class="model-select"></select>
          </div>
        </div>
        <div class="timeline">
          <span id="currentTime">0:00</span>
          <input type="range" id="seekBar" min="0" max="100" value="0">
          <span id="duration">0:00</span>
        </div>
        <div class="controls">
          <button id="btnShuffle" title="Shuffle">⇄</button>
          <button id="btnPrev" title="Anterior">⏮</button>
          <button id="btnPlay" title="Play/Pause">►</button>
          <button id="btnNext" title="Proxima">⏭</button>
          <button id="btnStop" title="Stop">⏹</button>
          <button id="btnRepeat" title="Repeat">↻</button>
          <button id="appearanceButton" title="Aparência" aria-label="Abrir aparencia">⚙️ Aparência</button>
        </div>
        <div class="volume">
          <span>Volume</span>
          <input type="range" id="volume" min="0" max="1" step="0.01" value="0.8">
          <div class="vu-meters" aria-hidden="true">
            <span class="vu-label">L</span>
            <div id="vuLeft" class="vu-track"><span class="vu-fill"></span></div>
            <span class="vu-label">R</span>
            <div id="vuRight" class="vu-track"><span class="vu-fill"></span></div>
          </div>
        </div>
      </footer>
    </main>
  </div>

  <div id="appearanceModal" class="appearance-modal hidden" aria-hidden="true">
    <div id="appearanceOverlay" class="appearance-overlay"></div>
    <div class="appearance-panel" role="dialog" aria-modal="true" aria-labelledby="appearanceTitle">
      <div class="appearance-header">
        <h2 id="appearanceTitle">Aparência</h2>
        <button id="appearanceClose" type="button" class="ghost">Fechar</button>
      </div>
      <div class="appearance-body">
        <label class="appearance-field" for="appearanceThemeSelect">
          <span>Tema</span>
          <select id="appearanceThemeSelect" class="model-select"></select>
        </label>
        <label class="appearance-field" for="appearanceLayoutSelect">
          <span>Layout</span>
          <select id="appearanceLayoutSelect" class="model-select">
            <option value="compact">Compact</option>
            <option value="split">Split</option>
            <option value="fullscreen">Fullscreen</option>
          </select>
        </label>
        <label class="appearance-field appearance-toggle" for="cornerGlowToggle">
          <span>Iluminação neon (4 cantos)</span>
          <input id="cornerGlowToggle" type="checkbox" checked>
        </label>
      </div>
    </div>
  </div>

  <script src="web/visualizer.js"></script>
  <script src="web/app.js"></script>
</body>
</html>
